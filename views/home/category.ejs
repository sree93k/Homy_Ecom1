
<%- include('../layout/user/header')%>

<link rel="stylesheet" href="/home/styles/home/homeStyle.css">
<header>
    <nav class="navbar navbar-expand-lg bg-body-tertiary">
        <div class="container">
            <!-- Left Side - Images -->
            <div class="d-flex">
                <a class="navbar-brand" href="#">
                    <img src="./images/userpage/Homy-logos_transparent.png" alt="Logo" width="90" height="60" class="d-inline-block align-text-top">
                </a>
                <a class="navbar-brand" href="#">
                    <img src="./images/userpage/homy.png" alt="Logo" width="120" height="60" class="d-inline-block align-text-top">
                </a>
            </div>

            <!-- Center - Navigation Links -->
            <div class="d-flex justify-content-center">
                <div class="container-fluid">
                    <a class="navbar-brand" href="#"></a>
                    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                        <span class="navbar-toggler-icon"></span>
                    </button>
                    <div class="collapse navbar-collapse" id="navbarNav">
                        <ul class="navbar-nav">
                            <li class="nav-item">
                                <a class="nav-link active" aria-current="page" href="/home/home">Home</a>
                            </li>
                            <li class="nav-item">
                              <a class="nav-link active" aria-current="page" href="/home/category">Collections</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link active" aria-current="page" href="#">Projects</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link active" aria-current="page" href="#">Contact</a>
                            </li>
                           
                        </ul>
                    </div>
                </div>
            </div>

            <!-- Right Side - Search, Login, Wishlist, Cart -->
            <div class="d-flex ml-auto">
                <!-- Add your search bar, login, wishlist, and cart links here -->
                <!-- Example: -->
                <input type="text" class="form-control m-3" placeholder="Search">

                <%if(loginStatus===false)
                {%>
                  <a href="/home/login" class="nav-link m-3 ">Login</a>
                  
                  <%} else {%>
                  
                    <!-- <a href="/home/logout" class="nav-link m-3 ">Logout</a> -->
                    <div class="collapse navbar-collapse" id="navbarNavDarkDropdown">
                      <ul class="navbar-nav">
                        <li class="nav-item dropdown">
                          <a class="nav-link dropdown-toggle" href="#" id="navbarDropdownMenuLink" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                            Hi, <%= userId.name %>
                          </a>
                          <ul class="dropdown-menu dropdown-menu-light dropdown-menu-lg-end" aria-labelledby="navbarDropdownMenuLink">
                            <a href="/home/userProfile"><li><button class="dropdown-item" id="userProfile" >Profile</button></li></a>
                            <a href="/home/userOrders"><li><button class="dropdown-item" id="userOrder" >Orders</button></li></a>
                            <a href="/home/userAddress"><li><button class="dropdown-item" id="userAddress" >Address</button></li></a>
                            <li><hr class="dropdown-divider"></li>
                            <li><button class="dropdown-item" id="userLogout" data-user-userId="<%= userId._id %>">Logout</button></li>
                          </ul>
                        </li>
                      </ul>
                    </div>
                    
                    
                    <%}%>
                
                    <a href="/home/userWishlist" class="nav-link m-3" ><i class="fa-regular fa-heart fa-lg" style="color: #31415e;"></i></a>
                    <a href="/home/userCart" class="nav-link m-3 "><i class="fa-solid fa-cart-arrow-down"></i></a>
            </div>
        </div>
    </nav>
</header>


<section>
    <div id="carouselExampleInterval" class="carousel slide" data-bs-ride="carousel">
        <div class="carousel-inner">
          <%if(allBanners.length>0)
          {
            for(let i=0;i<allBanners.length;i++)
            {%>
              <div class="carousel-item active" data-bs-interval="10000">
                <img src="./images/adminpage/<%=allBanners[i].bannerImage[0]%>" class="d-block w-100" alt="...">
              </div>
            <%}
          }else{%>
          
          <div class="carousel-item active" data-bs-interval="10000">
            <img src="./images/home/cozy-modern-loft-with-comfortable-design-elements-generated-by-ai-2-2.jpg" class="d-block w-100" alt="...">
          </div>
          <div class="carousel-item" data-bs-interval="2000">
            <img src="./images/home/minimalistic-modern-living-room-furniture-background-2.jpg" class="d-block w-100" alt="..."" class="d-block w-100" alt="...">
          </div>
          <div class="carousel-item">
            <img src="./images/home/blue-armchair-against-blue-wall-living-room-interior-elegant-interior-design-with-copy-space-ai-generative.jpg" class="d-block w-100" alt="...">
          </div>
        </div>
        <%}%>
        </div>
        <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleInterval" data-bs-slide="prev">
          <span class="carousel-control-prev-icon" aria-hidden="true"></span>
          <span class="visually-hidden">Previous</span>
        </button>
        <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleInterval" data-bs-slide="next">
          <span class="carousel-control-next-icon" aria-hidden="true"></span>
          <span class="visually-hidden">Next</span>
        </button>
      </div>

</section>


<section>
    <div class="container mt-5 mb-5">
        <div class="row">
            <div class="col-md-3">
                <div class="catLeft  p-3 ">
                  
                    <a href="/home/category" class="clearAll">Clear All</a>
                    <div class="browseCat mt-2">
                    <h6>BROWSE CATEGORIES</h6>
                    
                  </div>
                    

                    <div class="catList">
                     
                        
                   
                      
                        <!-- <form action="/home/categoryList" method="POST"> -->
                        <%if(category.length>0)
                           {
                            for(let i=0;i<category.length;i++)
                            {
                            %>
                                <!-- <a href="#" id="categoryList" class="link-no-underline" data-category-list="<%=category[i].categoryName%>"><%=category[i].categoryName%></a><br> -->
                               
                                     <a href="/home/categoryList?id=<%= category[i]._id %>" class="category-link link-no-underline" id="categoryValues" name="categoryValue"  data-category="<%= category[i].categoryName %>">
                                      <div class="catInner1">
                                        <div class="catInner2">
                                          <span class="material-symbols-outlined">
                                            keyboard_double_arrow_right
                                            </span>
                                        </div>
                                        <div class="catInner3 mt-1">
                                          <%= category[i].categoryName %>
                                        </div>

                                      </div>
                                    
                                    </a>

                                

                            <%
                            }
                          } 
                        %>

                    <!-- </form> -->
                    </div>
                   

                    <div class="price mt-3">
                      <h6>PRICE </h6>
                      
                        <div class="priceOption">
                         <form action="/home/priceFilter" method="post">
                          <div class="container-fluid">
                            <div class="row">
                              <input type="hidden"  id="categoryName" name="categoryName" value="<%=categoryName%>">
                              <%if(data){%>
                              <input type="hidden" id="minPriceExists" data-price="<%=data[0]%>">
                              <input type="hidden" id="maxPriceExists" data-price="<%=data[1]%>">
                              <%}%>
                              <div class="col-4">
                                <select class="form-select " id="minPrice" name="minPrice" aria-label="Select Category" >
                                  <option value=0>0</option>
                                  <option value=5000>5000</option>
                                  <option value=10000>10000</option>
                                  <option value=20000>20000</option> 
                                  <option value=30000>30000</option>
                                  <option value=40000>40000</option> 
                                  <option value=50000>50000</option> 
                                  <option value=60000>60000</option> 
                            </select>

                              </div>
                              <div class="col-4 ">
                                <select class="form-select ms-2" id="maxPrice" name="maxPrice" aria-label="Select Category" >
                                  <option value=5000>5000</option>
                                  <option value=10000>10000</option>
                                  <option value=20000>20000</option> 
                                  <option value=30000>30000</option>
                                  <option value=40000>40000</option> 
                                  <option value=50000>50000</option> 
                                  <option value=60000>60000</option> 
                                </select>
                              </div>

                            <div class="col-4" style="text-align: center;">
                               
                                <button type="submit" id="priceBtn" class="btn btn-outline-primary mt-1 ms-2"
                                        style="--bs-btn-padding-y: .25rem; --bs-btn-padding-x: .5rem; --bs-btn-font-size: .75rem;">
                                  Go
                                </button>

                              </div>
                            </div>
                          </div>
                        </form> 
 
                    </div>

                      
                    
                    </div>

                    <!-- userReview -->
                    <div class="userRating mt-5">
                      <h6>USER RATING</h6>

                      <div class="container">
                        <form action="/home/productRating" method="post">
                          <input type="hidden"  id="categoryName" name="categoryName" value="<%=categoryName%>">
                          <input type="hidden" value="fourRating" name="productRate">
                          <button class="ratingBtn"><i class="fa-solid fa-star " style="color:#18395c ;"></i><i class="fa-solid fa-star " style="color:#18395c ;"></i><i class="fa-solid fa-star " style="color:#18395c ;"></i><i class="fa-solid fa-star " style="color:#18395c ;"></i><i class="fa-regular fa-star" style="color:#18395c ;"></i> & Up</button>
                        </form>
                        <form action="/home/productRating" method="post">
                          <input type="hidden"  id="categoryName" name="categoryName" value="<%=categoryName%>">
                          <input type="hidden" value="threeRating" name="productRate">
                          <button class="ratingBtn"><i class="fa-solid fa-star " style="color:#18395c ;"></i><i class="fa-solid fa-star " style="color:#18395c ;"></i><i class="fa-solid fa-star " style="color:#18395c ;"></i><i class="fa-regular fa-star" style="color:#18395c ;"></i><i class="fa-regular fa-star" style="color:#18395c ;"></i> & Up</button>
                        </form>
                        <form action="/home/productRating" method="post">
                          <input type="hidden"  id="categoryName" name="categoryName" value="<%=categoryName%>">
                          <input type="hidden" value="twoRating" name="productRate">
                          <button class="ratingBtn"><i class="fa-solid fa-star " style="color:#18395c ;"></i><i class="fa-solid fa-star " style="color:#18395c ;"></i><i class="fa-regular fa-star" style="color:#18395c ;"></i><i class="fa-regular fa-star" style="color:#18395c ;"></i><i class="fa-regular fa-star" style="color:#18395c ;"></i> & Up</button>
                        </form>
                        <form action="/home/productRating" method="post">
                          <input type="hidden"  id="categoryName" name="categoryName" value="<%=categoryName%>">
                          <input type="hidden" value="oneRating" name="productRate">
                          <button class="ratingBtn"><i class="fa-solid fa-star " style="color:#18395c ;"></i><i class="fa-regular fa-star" style="color:#18395c ;"></i><i class="fa-regular fa-star" style="color:#18395c ;"></i><i class="fa-regular fa-star" style="color:#18395c ;"></i><i class="fa-regular fa-star" style="color:#18395c ;"></i> & Up</button>
                        </form>

                      </div>
                    </div>
                  


                </div>
            </div>

       
            <div class="col-md-9">
              
              <div class="sortBys">
               
                <div class="btn-group">
                  <div class="search-container">
                  <input type="text" id="searchInput" class="form-control m-3" placeholder="Search" style="width: 250px;" onkeyup="searchProducts()">
                  <ul id="searchResults"></ul>
                </div>
                    <button class="btn btn-outline-primary btn-sm dropdown-toggle ms-2  "  type="button" data-bs-toggle="dropdown" aria-expanded="false">
                        Sort By
                    </button>
                    <ul class="dropdown-menu">
                        <li>
                          <a href="/home/sorting?id=Popularity&catId=<%=categoryName%>" class="sortBy">Popularity</a>
                        </li>
                        <li>
                          <a href="/home/sorting?id=New Arrival&catId=<%=categoryName%>" class="sortBy">New Arrival</a>
                        </li>
                        <li>
                          <a href="/home/sorting?id=Avg. Customer Review&catId=<%=categoryName%>" class="sortBy">Avg. Customer Review</a>
                        </li>
                        <li>
                          <a href="/home/sorting?id=Price: High to Low&catId=<%=categoryName%>" class="sortBy">Price: High to Low</a>
                        </li>
                        <li>
                          <a href="/home/sorting?id=Price: Low To High&catId=<%=categoryName%>" class="sortBy">Price: Low To High</a>
                        </li>
                        <li>
                          <a href="/home/sorting?id=A - Z&catId=<%=categoryName%>" class="sortBy">A - Z</a>
                        </li>
                        <li>
                          <a href="/home/sorting?id=Z - A&catId=<%=categoryName%>" class="sortBy">Z - A</a>
                        </li>
                    </ul>
                </div>
            </div>
            
            
                <div class="catRight">
                    <div class="container">
                    
                    
                     
                        <div class="row row-cols-1 row-cols-md-3 g-4">

                        <%if(userWishlist)
                        {%>
                          <input type="hidden" id="hiddenWishList" value="<%=userWishlist%>">
                          
                            <%}%>


                            <%
                            if(products.length>0)
                            {
                                for(let i=0;i<products.length;i++)
                                {
                                    %>
    
                                    <div class="col-md-4 col-sm-6">
                                      <div class="card border-0 shadow-sm rounded-3 position-relative">
                                          <!-- Add the heart icon button -->
                                          <!-- noheart -->
                                          <button class="btn btn-outline-light noheart-Btn heart-Btn  position-absolute top-0 end-0 mt-2 me-3 p-0 " id="wishlistBtn" data-productId="<%=products[i]._id%>">
                                            <i class="fa-regular fa-heart noheart" style="font-size: 24px;"></i>

                                          </button>
                                          <!-- my heart -->
                                          <button class="btn btn-outline-light myheart-Btn heart-Btn position-absolute top-0 end-0 mt-2 me-3 p-0 " style="display: none;" id="wishlistBtn" data-productId="<%=products[i]._id%>">
                                         
                                            <i class="fa-solid fa-heart myheart" style="font-size: 24px;"></i>
                                          </button>

                                          <a href="/home/product/?product=<%= products[i]._id %>">
                                              <img src="./images/adminpage/<%= products[i].productImage[0] %>" class="card-img-top1 rounded-top" alt="<%= products[i].productImage %>">
                                          </a>
                                          <div class="card-body p-4">
                                              <input type="hidden" name="" id="productId" value="<%=products[i]._id%>">
                                              <input type="hidden" id="userId" value="<%=userId._id%>">
                                              <h5 class="card-title"><%= products[i].productName %></h5>

                                              <%if(products[i].productOffer)
                                              {%>
                                                <div class="mainPrice d-flex justify-content-center">
                                                <div class="priceOne">
                                                  <p class="card-text text-muted" style="text-decoration: line-through;">₹<%= products[i].productOffer.totalAmount %> </p>
                                                </div>
                                                <div class="priceTwo ms-4  ">
                                                  <p class="card-text text-muted" >
                                                    ₹  <%= products[i].productPrice %></p>
                                                </div>
                                              </div>
                                                <%} else {%>
                                                  <p class="card-text text-muted">₹<%= products[i].productPrice %></p>
                                                  <%}%>
                                              
                                              <div class="d-flex justify-content-between align-items-center mt-4">
                                                  <button class="btn btn-outline-primary btn-sm" id="addToCart" data-productId="<%=products[i]._id%>">Add to Cart</button>
                                                  <button class="btn btn-primary btn-sm" value="<%=products[i]._id%>" id="buyNowBtn">Buy Now</button>
                                              </div>
                                          </div>
                                      </div>
                                  </div>
                                  
    
    
                               <%     
                                }
                            }
                            %>

                    </div>
                </div>
            </div>
        </div>
        <nav aria-label="Page navigation example " style="background-color: white;margin-top: 40px;" >
          <ul class="pagination justify-content-center">
            <% if (page > 1) { %>
              <li class="page-item">
                <a class="page-link" href="?page=1" aria-label="Previous">&laquo;</a>
              </li>
              <li class="page-item">
                <a class="page-link" href="?page=<%= page - 1 %>" aria-label="Previous">&lsaquo;</a>
              </li>
            <% } else { %>
              <li class="page-item disabled">
                <span class="page-link">&laquo;</span>
              </li>
              <li class="page-item disabled">
                <span class="page-link">&lsaquo;</span>
              </li>
            <% } %>
        
            <% for (let i = 1; i <= totalPages; i++) { %>
              <li class="page-item <%= i === page ? 'active' : '' %>">
                <a class="page-link" href="?page=<%= i %>"><%= i %></a>
              </li>
            <% } %>
        
            <% if (page < totalPages) { %>
              <li class="page-item">
                <a class="page-link" href="?page=<%= page + 1 %>" aria-label="Next">&rsaquo;</a>
              </li>
              <li class="page-item">
                <a class="page-link" href="?page=<%= totalPages %>" aria-label="Next">&raquo;</a>
              </li>
            <% } else { %>
              <li class="page-item disabled">
                <span class="page-link">&rsaquo;</span>
              </li>
              <li class="page-item disabled">
                <span class="page-link">&raquo;</span>
              </li>
            <% } %>
          </ul>
        </nav>
   
        
  </div>
    


    </div>
</div>
</section>





<section>



  <!-- price filter show  -->
  <script>
    document.addEventListener('DOMContentLoaded',()=>{
      let minPrice=document.getElementById('minPrice')
      let maxPrice=document.getElementById('maxPrice')
      const minPriceExists=document.getElementById('minPriceExists').getAttribute('data-price')
      const maxPriceExists=document.getElementById('maxPriceExists').getAttribute('data-price')
      console.log("max price",maxPriceExists);
      console.log("min price",minPriceExists);

      if(maxPriceExists>0)
      {
        maxPrice.value=maxPriceExists
      }
      if(minPriceExists)
      {
        minPrice.value=minPriceExists
      }
     
    })

  </script>


  <!-- search auto clear -->

  <script>
    document.addEventListener('click', function(event) {
      const searchInput = document.getElementById('searchInput');
      const searchResults = document.getElementById('searchResults');
      
      // Check if the click event did not occur on the search input or search results
      if (!searchInput.contains(event.target) && !searchResults.contains(event.target)) {
          // Clear search input value
          searchInput.value = '';
          
          // Hide search results
          searchResults.innerHTML = '';
      }
  });
  
  </script>

<!-- single product -->
    <script>
        document.addEventListener('DOMContentLoaded', function () {
        const singleProductButton = document.getElementById('singleProduct');

        if (singleProductButton) {
            singleProductButton.addEventListener('click', function () {
                const productId = singleProductButton.getAttribute('product-id');
                // window.location.href = `/home/product/?id=${productId}`;
                fetch(`/home/product`, {
                method: 'PATCH',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ productID: productId }),
                })
                .then(response => response.json())
                
                .catch(error => {
        
                console.error('Error updating user:', error);
            });
            });


    
        }
    });
    </script>



</section>


<!-- user logout -->

<script>
    document.getElementById('userLogout')
    .addEventListener('click',()=>{
     
      fetch('/home/logout',{
        method:'POST',
        headers: {
            "Content-Type": "application/json",
          },
      })
      .then((response) => response.json())
        .then((data) => {
          console.log(data)
          Swal.fire({
            title: "Logout Successfully !",
            icon: "success"
          })
          .then(() => {
            window.location.href = '/home';
            });
        })
        .catch((error)=>{
          console.log(error)
        })
  
    })
  </script>



<!-- add to cart -->
<script>

  const addToCartButtons = document.querySelectorAll('#addToCart');

 
  addToCartButtons.forEach(addToCart => {
    addToCart.addEventListener('click', () => {
      console.log("Clicked on add to cart");
      const productId = addToCart.getAttribute('data-productId');
      console.log(productId);
      const userId = document.getElementById('userId').value;
      console.log(userId);
      
      fetch(`/home/addToCart`, {
        method: 'POST',
        headers: {
          "Content-Type": "application/json"
        },
        body: JSON.stringify({ productId: productId })
      })
      .then((response) => response.json())
      .then((data) => {
        console.log(data);
        console.log("Data added");
        if (data[0]) {
          Swal.fire({
              title: "Added To Cart Successfully",
              icon:"success",
              html: "",
              timer: 1000,
              timerProgressBar: true,
              didOpen: () => {
                Swal.showLoading();
                const timer = Swal.getPopup().querySelector("b");
                timerInterval = setInterval(() => {
                  timer.textContent = `${Swal.getTimerLeft()}`;
                }, 100);
              },
              willClose: () => {
                clearInterval(timerInterval);
              }
            })
        } else{
          if(data[1]==="No Stock")
          {
            Swal.fire({
              title: "Sorry ! No Stock",
              html: "",
              timer: 800,
              timerProgressBar: true,
              didOpen: () => {
                Swal.showLoading();
                const timer = Swal.getPopup().querySelector("b");
                timerInterval = setInterval(() => {
                  timer.textContent = `${Swal.getTimerLeft()}`;
                }, 100);
              },
              willClose: () => {
                clearInterval(timerInterval);
              }
            })

          }
          else
          {
            Swal.fire({
              title: "Already Added To Cart",
              html: "",
              timer: 600,
              timerProgressBar: true,
              didOpen: () => {
                Swal.showLoading();
                const timer = Swal.getPopup().querySelector("b");
                timerInterval = setInterval(() => {
                  timer.textContent = `${Swal.getTimerLeft()}`;
                }, 100);
              },
              willClose: () => {
                clearInterval(timerInterval);
              }
            })

          }
        
        }
      })
      .catch((error) => {
        console.log(error);
        console.log("Error data");
      });
    });
  });
</script>


<!-- search products -->

  <script>

function searchProducts() {
        const query = searchInput.value.trim();

        // Make an AJAX request to the server to search for products
        fetch(`/home/searchCategory?search=${query}`)
            .then(response => response.json())
            .then(products => {
              console.log("revceived");
                displaySearchResults(products);
            })
            .catch(error => {
                console.error('Error searching for products:', error);
            });
    }
    function displaySearchResults(products) {
      console.log("display pro");
        searchResults.innerHTML = '';
        products.forEach(product => {
            const listItem = document.createElement('li');
            listItem.textContent = product.productName;
            listItem.dataset.productId = product._id;
            searchResults.appendChild(listItem);
        });
    }

    function displayProductDetails(productId) {
        // Make an AJAX request to the server to get product details
        console.log("displkay");
        fetch(`/home/productSearch?productId=${productId}`)
            .then(response => response.json())
            .then(product => {
                // Display the product details on the page
                console.log('Product details:', product);
                window.location.href='/home/category'
            })
            .catch(error => {
                console.error('Error fetching product details:', error);
            });
    }
    document.addEventListener('DOMContentLoaded', function() {
    const searchInput = document.getElementById('searchInput');
    const searchResults = document.getElementById('searchResults');

    searchResults.addEventListener('click', function(event) {
        const clickedItem = event.target;
        
        if (clickedItem.tagName === 'LI') {
            const productId = clickedItem.dataset.productId;
            displayProductDetails(productId);
        }
    });



   
});

  </script>

  <!-- hide hearts -->

  <script src="https://cdn.jsdelivr.net/npm/bson-objectid"></script>
  <script>
    document.addEventListener('DOMContentLoaded', async () => {
      const myheart = document.querySelectorAll('.myheart-Btn');
      const hiddenWishlist = document.getElementById('hiddenWishList')
      const userWishlist = JSON.parse(hiddenWishlist.value);

      userWishlist.forEach(product=>{

    
        console.log(product);
        myheart.forEach(hearts=>{
          const productId=hearts.getAttribute('data-productId')
          if(productId==product)
          {
            hearts.style.display="inline-block"
          }
        })
      })

    })

  </script>



  
  
  <!-- hide hearts -->




<!-- wishlist btn add-->

<script>
  const noheartBtn = document.querySelectorAll('.noheart-Btn');
  const myheartBtn = document.querySelectorAll('.myheart-Btn');

  noheartBtn.forEach(wishList => {
    wishList.addEventListener('click', () => {
      const productId = wishList.getAttribute('data-productId');
      console.log("productID is >>", productId);

      fetch(`/home/addToWishlist?productId=${productId}`)
        .then((response) => response.json())
        .then((data) => {
          console.log("success", data);
          if (data === true) {
            wishList.style.display = 'none';
          
            myheartBtn.forEach(heartList=>{
              if(heartList.getAttribute('data-productId')===productId)
              {
                heartList.style.display="inline"
              }
            })
            
          }
          else if(data===false)
          {
          
            let timerInterval;
            Swal.fire({
              title: "Already Added In Wishlist",
              html: "",
              timer: 600,
              timerProgressBar: true,
              didOpen: () => {
                Swal.showLoading();
                const timer = Swal.getPopup().querySelector("b");
                timerInterval = setInterval(() => {
                  timer.textContent = `${Swal.getTimerLeft()}`;
                }, 100);
              },
              willClose: () => {
                clearInterval(timerInterval);
              }
            }).then((result) => {
              /* Read more about handling dismissals below */
              if (result.dismiss === Swal.DismissReason.timer) {
                console.log("I was closed by the timer");
              }
            });

          }

        })
        .catch((error) => {
          console.log(error);
        })
    })
  })
</script>



<!-- wishlist btn remove-->
<script>
  const noheartBtnn = document.querySelectorAll('.noheart-Btn');
  const myheartBtnn = document.querySelectorAll('.myheart-Btn');

  myheartBtnn.forEach(wishList => {
    wishList.addEventListener('click', () => {
      const productId = wishList.getAttribute('data-productId');
      console.log("productID is >>", productId);

      fetch(`/home/removeFromWishlist?productId=${productId}`)
        .then((response) => response.json())
        .then((data) => {
          console.log("success", data);
          if (data === true) {
            wishList.style.display = 'none';
          
            noheartBtnn.forEach(heartList=>{
              if(heartList.getAttribute('data-productId')===productId)
              {
                heartList.style.display="inline"
              }
            })
            
          }

        })
        .catch((error) => {
          console.log(error);
        })
    })
  })
</script>




<%- include('../layout/user/footer') %>