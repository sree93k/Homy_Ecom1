
<%- include('../layout/user/header')%>
<link rel="stylesheet" href="/styles/home/homeStyle.css">
<header>
    <nav class="navbar navbar-expand-lg bg-body-tertiary">
        <div class="container">
            <!-- Left Side - Images -->
            <div class="d-flex">
                <a class="navbar-brand" href="#">
                    <img src="../images/userpage/Homy-logos_transparent.png" alt="Logo" width="90" height="60" class="d-inline-block align-text-top">
                </a>
                <a class="navbar-brand" href="#">
                    <img src="../images/userpage/homy.png" alt="Logo" width="120" height="60" class="d-inline-block align-text-top">
                </a>
            </div>

            <!-- Center - Navigation Links -->
            <div class="d-flex justify-content-center">
                <div class="container-fluid">
                    <a class="navbar-brand" href="#"></a>
                    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                        <span class="navbar-toggler-icon"></span>
                    </button>
                    <div class="collapse navbar-collapse" id="navbarNav">
                        <ul class="navbar-nav">
                            <li class="nav-item">
                                <a class="nav-link active" aria-current="page" href="/home">Home</a>
                            </li>
                            <li class="nav-item">
                              <a class="nav-link active" aria-current="page" href="/home/category">Collections</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link active" aria-current="page" href="#">Projects</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link active" aria-current="page" href="#">Contact</a>
                            </li>
                           
                        </ul>
                    </div>
                </div>
            </div>

            <!-- Right Side - Search, Login, Wishlist, Cart -->
            <div class="d-flex ml-auto">
                <!-- Add your search bar, login, wishlist, and cart links here -->
                <!-- Example: -->
                <input type="text" class="form-control m-3" placeholder="Search">
                <%if(loginStatus===false)
                {%>
                  <a href="/home/login" class="nav-link m-3 ">Login</a>
                  
                  <%} else {%>
                  
                    <div class="collapse navbar-collapse" id="navbarNavDarkDropdown">
                        <ul class="navbar-nav">
                          <li class="nav-item dropdown">
                            <a class="nav-link dropdown-toggle" href="#" id="navbarDropdownMenuLink" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                              Hi, <%= userId.name %>
                            </a>
                            <ul class="dropdown-menu dropdown-menu-light dropdown-menu-lg-end" aria-labelledby="navbarDropdownMenuLink">
                              <a href="/home/userProfile"><li><button class="dropdown-item" id="userProfile" >Profile</button></li></a>
                              <a href="/home/userOrders"><li><button class="dropdown-item" id="userOrder" >Orders</button></li></a>
                              <a href="/home/userAddress"><li><button class="dropdown-item" id="userAddress" >Address</button></li></a>
                              <li><hr class="dropdown-divider"></li>
                              <li><button class="dropdown-item" id="userLogout" data-user-userId="<%= userId._id %>">Logout</button></li>
                            </ul>
                          </li>
                        </ul>
                      </div>
                    
                    <%}%>
                
                    <a href="/home/userWishlist" class="nav-link m-3" ><i class="fa-regular fa-heart fa-lg" style="color: #31415e;"></i></a>
                    <a href="/home/userCart" class="nav-link m-3 "><i class="fa-solid fa-cart-arrow-down"></i></a>
            </div>
        </div>
    </nav>
</header>


<section>

    <div class="container">
        <div class="row">
            <div class="col-8    ">
                <div class="leftouter">
                <div class="container">
                    <div class="row">
                        <!-- <div class="col-8">
                            <img src="../images/adminpage/<%= products.productImage[0] %>" class="mainImage" alt="" id="zoomable-Image">
                            
                          </div> -->
                          <div class="col-8">
                            <div id="img-container" >
                              <img src="../images/adminpage/<%= products.productImage[0] %>" class="mainImage" alt="" id="featured">
                            </div>
                          </div>
                        <div class="col-4">
                            <div class="innerRight">
                            <div class="one">
                                <img src="../images/adminpage/<%=products.productImage[0]%>" width='100px' alt="" class="innerRightImage" onclick="changeMainImage(this)">
                            </div> 
                            <div class="two">
                                <img src="../images/adminpage/<%=products.productImage[1]%>" width='100px' alt="" class="innerRightImage" onclick="changeMainImage(this)">
                        </div>
                        <div class="three">
                            <img src="../images/adminpage/<%=products.productImage[2]%>" width='100px' alt="" class="innerRightImage" onclick="changeMainImage(this)">
                        </div>
                    </div>
                    </div>
                </div>
               
                </div>
            </div>
            </div>
            <div class="col-md-4 col-sm-6 d-flex align-items-center justify-content-center">
                <div class="card border-0 shadow-sm rounded-3 text-center">
                 
                  <div class="card-body">
                    <h1 class="card-title mb-2">Chair</h1>
                    <h5 class="card-text mb-0">â‚¹4000</h4>
                    <ul class="list-group list-group-flush mt-3">
                      <li class="list-group-item border-0 ps-0"><i class="fa fa-tag me-2 text-muted"></i>Category: Furniture</li>
                      <li class="list-group-item border-0 ps-0"><i class="fa fa-check-circle me-2 text-success"></i>In Stock</li>
                    </ul>
                    <p class="card-text mt-3 mb-4">
                      A comfortable and stylish chair that blends perfectly with any decor.
                    </p>
                    <div class="d-flex justify-content-center">
                      <button class="btn btn-primary px-4 rounded-pill mx-2">BUY NOW</button>
                      <button class="btn btn-outline-primary px-4 rounded-pill" id="addToCart">ADD TO CART</button>
                    </div>
                  </div>
                </div>
              </div>
        </div>
    </div>










</section>


<!-- user logout -->

<script>
  document.getElementById('userLogout')
  .addEventListener('click',()=>{
   
    fetch('/home/logout',{
      method:'POST',
      headers: {
          "Content-Type": "application/json",
        },
    })
    .then((response) => response.json())
      .then((data) => {
        console.log(data)
        Swal.fire({
          title: "Logout Successfully !",
          icon: "success"
        })
        .then(() => {
          window.location.href = '/home';
          });
      })
      .catch((error)=>{
        console.log(error)
      })

  })
</script>

<!-- image zoom -->

<script src="https://unpkg.com/js-image-zoom@0.7.0/js-image-zoom.js" type="application/javascript"></script>

<script>

    var options1 = {
        width: 400,
        zoomWidth: 500,
        offset: {vertical: 0, horizontal: 10}
    };
    
    var options2 = {
        fillContainer: true,
        width:600,
        offset: {vertical: 0, horizontal: 10}
    };
    
    new ImageZoom(document.getElementById("img-container"), options2);
    
    </script>



<script>
    function changeMainImage(clickedImage) {
  const featuredImage = document.getElementById("featured");
  featuredImage.src = clickedImage.src;
}

</script>

<!-- logout -->
<script>
    document.getElementById('userLogout')
    .addEventListener('click',()=>{
     
      fetch('/home/logout',{
        method:'POST',
        headers: {
            "Content-Type": "application/json",
          },
      })
      .then((response) => response.json())
        .then((data) => {
          console.log(data)
          Swal.fire({
            title: "Logout Successfully !",
            icon: "success"
          })
          .then(() => {
            window.location.href = '/home';
            });
        })
        .catch((error)=>{
          console.log(error)
        })
  
    })
  </script>



<!-- add to cart -->
<script>

  const addToCartButtons = document.querySelectorAll('#addToCart');

 
  addToCartButtons.forEach(addToCart => {
    addToCart.addEventListener('click', () => {
      console.log("Clicked on add to cart");
      const productId = addToCart.getAttribute('data-productId');
      console.log(productId);
      const userId = document.getElementById('userId').value;
      console.log(userId);
      
      fetch(`/home/addToCart?id=${userId}`, {
        method: 'POST',
        headers: {
          "Content-Type": "application/json"
        },
        body: JSON.stringify({ productId: productId })
      })
      .then((response) => response.json())
      .then((data) => {
        console.log(data);
        console.log("Data added");
        if (data[0]) {
          Swal.fire({
            title: "Added To cart",
            icon: "Successfully Added"
          });
        } else {
          Swal.fire({
            title: "Product Already Added",
            icon: "error"
          });
        }
      })
      .catch((error) => {
        console.log(error);
        console.log("Error data");
      });
    });
  });
</script>

<%- include('../layout/user/footer') %>